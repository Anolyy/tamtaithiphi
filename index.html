<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√° S·ªë T·ª≠ Vi 2025 - T·∫£i PDF Mi·ªÖn Ph√≠</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@400;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #e0e0ff;
            font-family: 'Roboto', sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .particle {
            position: absolute;
            background: rgba(0, 255, 255, 0.6);
            border-radius: 50%;
            box-shadow: 0 0 15px cyan;
            animation: float 12s infinite linear;
        }
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        header {
            text-align: center;
            padding: 50px 20px;
            background: rgba(0, 0, 0, 0.5);
            border-bottom: 3px solid cyan;
        }
        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.8em;
            text-shadow: 0 0 20px cyan, 0 0 40px magenta;
            animation: neon 2s infinite alternate;
        }
        @keyframes neon { from { text-shadow: 0 0 10px cyan; } to { text-shadow: 0 0 30px cyan, 0 0 50px magenta; } }
        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            backdrop-filter: blur(10px);
        }
        section { margin-bottom: 40px; padding: 20px; border: 1px solid rgba(0, 255, 255, 0.5); border-radius: 10px; background: rgba(0, 0, 0, 0.3); }
        h2 { color: cyan; text-shadow: 0 0 10px cyan; margin-bottom: 15px; }

        /* ==== TAB ==== */
        .tab {
            overflow: hidden;
            border: 1px solid rgba(0,255,255,0.5);
            border-radius: 10px 10px 0 0;
            background: rgba(0,0,0,0.4);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .tab button {
            background: transparent;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 20px;
            transition: 0.3s;
            font-size: 1.1em;
            color: #ccc;
            flex: 1;
            min-width: 150px;
        }
        .tab button:hover { background: rgba(255,255,255,0.1); }
        .tab button.active {
            background: linear-gradient(45deg, cyan, magenta);
            color: black;
            font-weight: bold;
        }
        .tabcontent {
            display: none;
            padding: 20px;
            border: 1px solid rgba(0,255,255,0.5);
            border-top: none;
            border-radius: 0 0 10px 10px;
            animation: fade 0.5s;
        }
        @keyframes fade { from {opacity:0;} to {opacity:1;} }
        .tabcontent.active { display: block; }

        .lookup-form {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
        }
        input, select {
            padding: 12px;
            margin: 8px;
            width: 120px;
            border: 2px solid cyan;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 8px;
            font-size: 1em;
        }
        button {
            margin: 20px 10px;
            padding: 12px 30px;
            background: linear-gradient(45deg, cyan, magenta);
            border: none;
            color: black;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
            transition: 0.3s;
        }
        button:hover { transform: scale(1.1); box-shadow: 0 0 30px magenta; }
        #result { margin-top: 20px; padding: 20px; border-radius: 10px; background: rgba(0, 0, 0, 0.5); min-height: 80px; display: none; animation: glow 1.5s infinite alternate; }
        @keyframes glow { from { box-shadow: 0 0 10px cyan; } to { box-shadow: 0 0 30px magenta; } }
        #tuvi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 12px;
            max-width: 900px;
            margin: 30px auto;
        }
        .cung {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid cyan;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: 0.3s;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.4);
        }
        .cung:hover { transform: scale(1.05); box-shadow: 0 0 30px magenta; }
        .cung h3 { color: gold; margin: 0; font-size: 1.2em; }
        .cung .tinh { color: #ff6b6b; font-weight: bold; font-size: 0.9em; }
        .cung.menh { border-color: gold; box-shadow: 0 0 25px gold; }
        #pdf-content { background: white; color: black; padding: 40px; border-radius: 15px; max-width: 800px; margin: 20px auto; }
        #pdf-content h1 { color: #302b63; text-align: center; }
        #pdf-content .cung { background: #f0f0ff; border: 2px solid #302b63; color: #302b63; }
        footer { text-align: center; padding: 20px; color: #aaa; font-size: 0.9em; }
        @media (max-width: 768px) {
            h1 { font-size: 2.5em; }
            #tuvi-grid { grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(6, 1fr); }
            input, select { width: 100px; }
            .tab button { min-width: auto; padding: 10px; font-size: 1em; }
        }
    </style>
    <!-- Th∆∞ vi·ªán xu·∫•t PDF -->
    <script src="https://html2pdf.js.org/html2pdf.bundle.min.js"></script>
</head>
<body>
    <div id="particles"></div>

    <header>
        <h1>L√Å S·ªê T·ª¨ VI</h1>
        <p>Blockchain Phong Th·ªßy 2025 - T·∫£i PDF Mi·ªÖn Ph√≠</p>
    </header>

    <div class="container">
        <section>
            <h2>üîÆ Nh·∫≠p Th√¥ng Tin Xem L√° S·ªë</h2>
            <div class="lookup-form">
                <input type="number" id="day" placeholder="Ng√†y" min="1" max="31">
                <input type="number" id="month" placeholder="Th√°ng" min="1" max="12">
                <input type="number" id="year" placeholder="NƒÉm" min="1900" max="2025">
                <select id="gender">
                    <option value="nam">Nam</option>
                    <option value="nu">N·ªØ</option>
                </select>
                <select id="hour">
                    <option value="0">T√Ω (23h-1h)</option>
                    <option value="1">S·ª≠u</option>
                    <option value="2">D·∫ßn</option>
                    <option value="3">M√£o</option>
                    <option value="4">Th√¨n</option>
                    <option value="5">T·ªµ</option>
                    <option value="6">Ng·ªç</option>
                    <option value="7">M√πi</option>
                    <option value="8">Th√¢n</option>
                    <option value="9">D·∫≠u</option>
                    <option value="10">Tu·∫•t</option>
                    <option value="11">H·ª£i</option>
                </select>
                <br>
                <button onclick="generateTuVi()">XEM L√Å S·ªê</button>
                <button onclick="downloadPDF()" style="background: linear-gradient(45deg, gold, orange);">T·∫¢I PDF</button>
                <div id="result"></div>
            </div>
        </section>

        <!-- ==== TAB ==== -->
        <div class="tab">
            <button class="tablinks active" onclick="openTab(event, 'LaSo')">L√° S·ªë</button>
            <button class="tablinks" onclick="openTab(event, 'LuanGiai')">Lu·∫≠n Gi·∫£i Tam Tai & Th·ªã Phi</button>
        </div>

        <!-- L√° S·ªë -->
        <div id="LaSo" class="tabcontent active">
            <h2>L√° S·ªë T·ª≠ Vi C·ªßa B·∫°n</h2>
            <div id="tuvi-grid"></div>
            <div id="tuviketqua" style="text-align:center; margin-top:20px;"></div>
        </div>

        <!-- Lu·∫≠n Gi·∫£i -->
        <div id="LuanGiai" class="tabcontent">
            <h2>üî• Lu·∫≠n Gi·∫£i Tam Tai & Th·ªã Phi 2025</h2>
            <div id="tamtai-content"></div>
        </div>
    </div>

    <!-- N·ªôi dung ·∫©n ƒë·ªÉ xu·∫•t PDF -->
    <div id="pdf-content" style="display:none;">
        <h1>L√Å S·ªê T·ª¨ VI</h1>
        <p id="pdf-info" style="text-align:center; font-size:1.1em;"></p>
        <div id="pdf-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:15px; margin:30px 0;"></div>
        <p id="pdf-ketqua" style="text-align:center; font-style:italic; margin-top:20px;"></p>
        <div id="pdf-tamtai" style="margin-top:40px; padding:20px; border-top:2px solid #302b63;">
            <h2 style="color:#302b63;">Lu·∫≠n Gi·∫£i Tam Tai & Th·ªã Phi</h2>
            <div id="pdf-tamtai-text"></div>
        </div>
        <p style="text-align:center; color:#888; margin-top:30px;">¬© 2025 T·ª≠ Vi Blockchain - D·ªØ li·ªáu m√£ h√≥a b·∫•t bi·∫øn</p>
    </div>

    <footer>¬© 2025 T·ª≠ Vi Blockchain - D·ªØ li·ªáu ƒë∆∞·ª£c m√£ h√≥a tr√™n chu·ªói kh·ªëi.</footer>

    <script>
        // === PARTICLES ===
        const pContainer = document.getElementById('particles');
        for (let i = 0; i < 60; i++) {
            const p = document.createElement('div');
            p.classList.add('particle');
            p.style.width = `${Math.random() * 15 + 5}px`;
            p.style.height = p.style.width;
            p.style.left = `${Math.random() * 100}vw`;
            p.style.animationDelay = `${Math.random() * 10}s`;
            pContainer.appendChild(p);
        }

        // === CAN CHI & T·ª¨ VI ===
        const can = ["Canh","T√¢n","Nh√¢m","Qu√Ω","Gi√°p","·∫§t","B√≠nh","ƒêinh","M·∫≠u","K·ª∑"];
        const chi = ["Th√¢n","D·∫≠u","Tu·∫•t","H·ª£i","T√Ω","S·ª≠u","D·∫ßn","M√£o","Th√¨n","T·ªµ","Ng·ªç","M√πi"];
        const gioChi = ["T√Ω","S·ª≠u","D·∫ßn","M√£o","Th√¨n","T·ªµ","Ng·ªç","M√πi","Th√¢n","D·∫≠u","Tu·∫•t","H·ª£i"];
        const cungArr = ["M·ªánh","Ph·ª• M·∫´u","Ph√∫c ƒê·ª©c","ƒêi·ªÅn Tr·∫°ch","Quan L·ªôc","N√¥ B·ªôc","Thi√™n Di","T·∫≠t √Åch","T√†i B·∫°ch","T·ª≠ T·ª©c","Phu Th√™","Huynh ƒê·ªá"];
        const chinhTinh = ["T·ª≠ Vi","Thi√™n Ph·ªß","Th√°i D∆∞∆°ng","V≈© Kh√∫c","Thi√™n ƒê·ªìng","Li√™m Trinh","Thi√™n C∆°","Thi√™n L∆∞∆°ng","C·ª± M√¥n","Th·∫•t S√°t","Ph√° Qu√¢n","Tham Lang"];

        // ==== D·ªÆ LI·ªÜU TAM TAI 2025 ====
        const tamtai2025 = {
            "H·ª£i": {group:"H·ª£i-M√£o-M√πi", warn:"üö® PH·∫†M TAM TAI", advice:"NƒÉm 2025 l√† nƒÉm **·∫§t T·ªµ** thu·ªôc h√†nh H·ªèa, kh·∫Øc Th·ªßy c·ªßa nh√≥m H·ª£i-M√£o-M√πi. <br>‚ö†Ô∏è <strong>Th·ªã Phi:</strong> D·ªÖ b·ªã ti·ªÉu nh√¢n qu·∫•y ph√°, ki·ªán t·ª•ng, l·ªùi ra ti·∫øng v√†o. <br>üí° <strong>Kh·∫Øc ph·ª•c:</strong> Gi·ªØ mi·ªáng, tr√°nh tranh c√£i, l√†m vi·ªác thi·ªán, ƒëeo ƒë√° m·∫Øt h·ªï ho·∫∑c v√≤ng tr·∫ßm h∆∞∆°ng."},
            "M√£o": {group:"H·ª£i-M√£o-M√πi", warn:"üö® PH·∫†M TAM TAI", advice:"NƒÉm 2025 l√† nƒÉm **·∫§t T·ªµ** thu·ªôc h√†nh H·ªèa, kh·∫Øc Th·ªßy c·ªßa nh√≥m H·ª£i-M√£o-M√πi. <br>‚ö†Ô∏è <strong>Th·ªã Phi:</strong> D·ªÖ b·ªã ti·ªÉu nh√¢n qu·∫•y ph√°, ki·ªán t·ª•ng, l·ªùi ra ti·∫øng v√†o. <br>üí° <strong>Kh·∫Øc ph·ª•c:</strong> Gi·ªØ mi·ªáng, tr√°nh tranh c√£i, l√†m vi·ªác thi·ªán, ƒëeo ƒë√° m·∫Øt h·ªï ho·∫∑c v√≤ng tr·∫ßm h∆∞∆°ng."},
            "M√πi": {group:"H·ª£i-M√£o-M√πi", warn:"üö® PH·∫†M TAM TAI", advice:"NƒÉm 2025 l√† nƒÉm **·∫§t T·ªµ** thu·ªôc h√†nh H·ªèa, kh·∫Øc Th·ªßy c·ªßa nh√≥m H·ª£i-M√£o-M√πi. <br>‚ö†Ô∏è <strong>Th·ªã Phi:</strong> D·ªÖ b·ªã ti·ªÉu nh√¢n qu·∫•y ph√°, ki·ªán t·ª•ng, l·ªùi ra ti·∫øng v√†o. <br>üí° <strong>Kh·∫Øc ph·ª•c:</strong> Gi·ªØ mi·ªáng, tr√°nh tranh c√£i, l√†m vi·ªác thi·ªán, ƒëeo ƒë√° m·∫Øt h·ªï ho·∫∑c v√≤ng tr·∫ßm h∆∞∆°ng."},
            "default": {warn:"‚úÖ KH√îNG PH·∫†M TAM TAI", advice:"NƒÉm 2025 **·∫§t T·ªµ** kh√¥ng xung kh·∫Øc v·ªõi tu·ªïi c·ªßa b·∫°n. <br>üéâ <strong>Th·ªã Phi:</strong> √çt r·∫Øc r·ªëi, d·ªÖ ƒë∆∞·ª£c qu√Ω nh√¢n gi√∫p ƒë·ª°. <br>üí° <strong>Khuy·∫øn kh√≠ch:</strong> M·ªü r·ªông quan h·ªá, ƒë·∫ßu t∆∞, kh·ªüi nghi·ªáp. ƒêeo ng·ªçc b√≠ch ho·∫∑c th·∫°ch anh h·ªìng ƒë·ªÉ tƒÉng v·∫≠n may."}
        };

        function getCanChi(y) { return `${can[y % 10]} ${chi[y % 12]}`; }

        function generateTuVi() {
            const d = parseInt(document.getElementById('day').value);
            const m = parseInt(document.getElementById('month').value);
            const y = parseInt(document.getElementById('year').value);
            const g = document.getElementById('gender').value;
            const h = parseInt(document.getElementById('hour').value);
            if (!d || !m || !y) return alert("‚ö†Ô∏è Nh·∫≠p ƒë·∫ßy ƒë·ªß ng√†y/th√°ng/nƒÉm!");

            const canchi = getCanChi(y);
            const chiYear = chi[y % 12];
            const gio = gioChi[h];
            const tamtai = tamtai2025[chiYear] || tamtai2025.default;

            // --- L√° s·ªë ---
            document.getElementById('LaSo').style.display = "block";
            const grid = document.getElementById('tuvi-grid');
            grid.innerHTML = "";
            const pdfGrid = document.getElementById('pdf-grid');
            pdfGrid.innerHTML = "";

            cungArr.forEach((cung, i) => {
                const tinh = chinhTinh[i % chinhTinh.length];
                const div = document.createElement('div');
                div.className = `cung ${cung === "M·ªánh" ? "menh" : ""}`;
                div.innerHTML = `<h3>${cung}</h3><div class="tinh">${tinh}</div>`;
                grid.appendChild(div);

                const pdfDiv = div.cloneNode(true);
                pdfGrid.appendChild(pdfDiv);
            });

            const info = `${d}/${m}/${y} - ${gio} gi·ªù - ${g === "nam" ? "D∆∞∆°ng Nam" : "√Çm N·ªØ"}`;
            document.getElementById('tuviketqua').innerHTML = `
                <p><strong>Tu·ªïi:</strong> ${canchi} | <strong>Gi·ªù sinh:</strong> ${gio}</p>
                <p><strong>Tam Tai 2025:</strong> ${tamtai.warn}</p>
                <p>üí´ <strong>M·ªánh:</strong> T·ª≠ Vi t·ªça th·ªß - Qu√Ω nh√¢n ph√π tr·ª£, s·ª± nghi·ªáp thƒÉng ti·∫øn!</p>
            `;

            // --- Lu·∫≠n gi·∫£i Tam Tai ---
            document.getElementById('tamtai-content').innerHTML = `
                <p><strong>Nh√≥m Tam Tai:</strong> ${tamtai.group || "Kh√¥ng thu·ªôc nh√≥m Tam Tai 2025"}</p>
                <p style="font-size:1.2em; margin:15px 0;">${tamtai.advice}</p>
                <hr style="border:1px dashed cyan; margin:20px 0;">
                <p><em>üí° <strong>M·∫πo phong th·ªßy:</strong> C√∫ng sao gi·∫£i h·∫°n v√†o m√πng 8 √¢m l·ªãch, ƒë·∫∑t c√¢y kim ti·ªÅn ·ªü h∆∞·ªõng ƒê√¥ng Nam, ƒëeo v√≤ng tay phong th·ªßy h·ª£p m·ªánh.</em></p>
            `;

            // --- PDF ---
            document.getElementById('pdf-info').innerText = info;
            document.getElementById('pdf-ketqua').innerHTML = document.getElementById('tuviketqua').innerHTML;
            document.getElementById('pdf-tamtai-text').innerHTML = document.getElementById('tamtai-content').innerHTML;

            document.getElementById('result').style.display = "block";
            document.getElementById('result').innerHTML = "‚úÖ L√° s·ªë & lu·∫≠n gi·∫£i ƒë√£ s·∫µn s√†ng! Nh·∫•n T·∫¢I PDF ƒë·ªÉ l∆∞u.";
        }

        // === TAB ===
        function openTab(evt, tabName) {
            const tabcontent = document.getElementsByClassName("tabcontent");
            for (let i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            const tablinks = document.getElementsByClassName("tablinks");
            for (let i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.className += " active";
        }

        // === T·∫¢I PDF ===
        function downloadPDF() {
            if (!document.getElementById('pdf-info').innerText) {
                alert("‚ö†Ô∏è Vui l√≤ng XEM L√Å S·ªê tr∆∞·ªõc khi t·∫£i!");
                return;
            }
            const element = document.getElementById('pdf-content');
            const opt = {
                margin: 0.5,
                filename: `La_So_Tu_Vi_2025.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
